(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.i18n,a=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,r=window.wp.data,i=()=>Math.random().toString(36).substr(2,9),d={stroke:{label:"Stroke",icon:"â”"},circle:{label:"Circle",icon:"â—‹"},ellipse:{label:"Ellipse",icon:"â¬­"},rectangle:{label:"Rectangle",icon:"â–¡"},path:{label:"Draw Path",icon:"âœ"},svg:{label:"SVG Path",icon:"âœŽ"}},s=e=>{const t={id:i(),type:e,x:50,y:50,colorMode:"gradient",color:"#ff6b6b",colorSpeed:1,randomizeColor:!0,force:1,timing:{delay:0,duration:500,repeat:0,repeatDelay:0},random:{x:[0,0],y:[0,0],angle:[0,0],speed:[0,0],size:[0,0],force:[0,0]}};switch(e){case"stroke":return{...t,props:{length:100,angle:0,speed:1}};case"circle":return{...t,props:{radius:50,speed:1}};case"ellipse":return{...t,props:{radiusX:60,radiusY:40,rotation:0,speed:1}};case"rectangle":return{...t,props:{width:80,height:50,rotation:0,speed:1}};case"path":return{...t,props:{points:[],scale:1,speed:1}};case"svg":return{...t,props:{pathData:"M0,0 C50,50 100,0 150,50",scale:1,rotation:0,speed:1}};default:return t}},c={scattered:{name:"Scattered",generate:()=>{const e=[];for(let t=0;t<8;t++)e.push({...s("stroke"),x:10+80*Math.random(),y:10+80*Math.random(),props:{length:50+100*Math.random(),angle:360*Math.random(),speed:.5+Math.random()},timing:{delay:150*t,duration:300+200*Math.random(),repeat:0,repeatDelay:0}});return e}},radialBurst:{name:"Radial Burst",generate:()=>{const e=[];for(let t=0;t<8;t++){const l=t/8*360;e.push({...s("stroke"),x:50,y:50,props:{length:80,angle:l,speed:1.5},timing:{delay:0,duration:400,repeat:0,repeatDelay:0}})}return e}},grid:{name:"Grid Pattern",generate:()=>{const e=[];for(let t=0;t<3;t++)for(let l=0;l<3;l++)e.push({...s("circle"),x:25+25*l,y:25+25*t,props:{radius:30,speed:.8},timing:{delay:100*(3*t+l),duration:300,repeat:0,repeatDelay:0}});return e}},randomLines:{name:"Random Lines",generate:()=>{const e=[];for(let t=0;t<5;t++)e.push({...s("stroke"),x:100*Math.random(),y:100*Math.random(),props:{length:150+100*Math.random(),angle:90*Math.random()-45,speed:.8},timing:{delay:200*t,duration:600,repeat:0,repeatDelay:0}});return e}},gentleWaves:{name:"Gentle Waves",generate:()=>{const e=[];for(let t=0;t<4;t++)e.push({...s("svg"),x:10,y:20+20*t,props:{pathData:"M0,0 Q40,20 80,0 Q120,-20 160,0 Q200,20 240,0",scale:.8,rotation:0,speed:.6},timing:{delay:300*t,duration:800,repeat:0,repeatDelay:0}});return e}}};function m({shapes:e,selectedId:l,onSelectShape:a,onUpdateShape:n,drawingMode:r,onDrawingComplete:i,drawingPoints:s,setDrawingPoints:c}){const[m,u]=(0,o.useState)(null),g=(0,o.useCallback)(e=>{if(!m)return;const t=e.currentTarget.getBoundingClientRect(),l=(e.clientX-m.startX)/t.width*100,a=(e.clientY-m.startY)/t.height*100,o=Math.max(0,Math.min(100,m.origX+l)),r=Math.max(0,Math.min(100,m.origY+a));n(m.id,{x:o,y:r})},[m,n]),p=()=>u(null);return(0,t.createElement)("div",{style:{position:"relative",width:"100%",height:"100%",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",borderRadius:"8px",overflow:"hidden"},onMouseMove:g,onMouseUp:p,onMouseLeave:p,onClick:()=>a(null)},r&&(0,t.createElement)("div",{style:{position:"absolute",top:"10px",left:"50%",transform:"translateX(-50%)",background:"rgba(99, 102, 241, 0.9)",color:"#fff",padding:"8px 16px",borderRadius:"20px",fontSize:"12px",zIndex:100}},"Click to add points â€¢ Double-click to finish"),r&&s.length>0&&(0,t.createElement)("svg",{style:{position:"absolute",width:"100%",height:"100%",pointerEvents:"none"}},(0,t.createElement)("path",{d:s.map((e,t)=>0===t?`M${e.x}%,${e.y}%`:`L${e.x}%,${e.y}%`).join(" "),fill:"none",stroke:"#10b981",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"5,5"}),s.map((e,l)=>(0,t.createElement)("circle",{key:l,cx:`${e.x}%`,cy:`${e.y}%`,r:"6",fill:"#10b981"}))),(0,t.createElement)("svg",{width:"100%",height:"100%",style:{position:"absolute",opacity:.1}},(0,t.createElement)("defs",null,(0,t.createElement)("pattern",{id:"grid",width:"10%",height:"10%",patternUnits:"userSpaceOnUse"},(0,t.createElement)("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"#fff",strokeWidth:"0.5"}))),(0,t.createElement)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})),e.map(e=>{const n=e.id===l,o={position:"absolute",left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)",cursor:"move",border:n?"2px solid #6366f1":"2px solid transparent",borderRadius:"4px",padding:"4px",background:n?"rgba(99, 102, 241, 0.2)":"transparent"};let r=null;const{props:i}=e;switch(e.type){case"stroke":const e=i.angle*Math.PI/180,l=.5*i.length;r=(0,t.createElement)("svg",{width:2*l+20,height:2*l+20,style:{overflow:"visible"}},(0,t.createElement)("line",{x1:l+10-Math.cos(e)*l,y1:l+10-Math.sin(e)*l,x2:l+10+Math.cos(e)*l,y2:l+10+Math.sin(e)*l,stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round"}));break;case"circle":r=(0,t.createElement)("svg",{width:2*i.radius+10,height:2*i.radius+10},(0,t.createElement)("circle",{cx:i.radius+5,cy:i.radius+5,r:i.radius,fill:"none",stroke:"#6366f1",strokeWidth:"2"}));break;case"ellipse":r=(0,t.createElement)("svg",{width:2*i.radiusX+10,height:2*i.radiusY+10,style:{transform:`rotate(${i.rotation}deg)`}},(0,t.createElement)("ellipse",{cx:i.radiusX+5,cy:i.radiusY+5,rx:i.radiusX,ry:i.radiusY,fill:"none",stroke:"#6366f1",strokeWidth:"2"}));break;case"rectangle":r=(0,t.createElement)("svg",{width:i.width+10,height:i.height+10,style:{transform:`rotate(${i.rotation}deg)`}},(0,t.createElement)("rect",{x:"5",y:"5",width:i.width,height:i.height,fill:"none",stroke:"#6366f1",strokeWidth:"2"}));break;case"path":if(i.points&&i.points.length>1){const e=i.points,l=e.map((e,t)=>0===t?`M${e.x},${e.y}`:`L${e.x},${e.y}`).join(" ");r=(0,t.createElement)("svg",{width:"200",height:"150",viewBox:"0 0 100 100",style:{overflow:"visible"}},(0,t.createElement)("path",{d:l,fill:"none",stroke:"#6366f1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.map((e,l)=>(0,t.createElement)("circle",{key:l,cx:e.x,cy:e.y,r:"3",fill:"#6366f1"})))}else r=(0,t.createElement)("div",{style:{padding:"8px",color:"rgba(255,255,255,0.5)",fontSize:"11px"}},"Click canvas to draw");break;case"svg":r=(0,t.createElement)("svg",{width:"100",height:"60",viewBox:"0 0 250 50",style:{transform:`scale(${i.scale}) rotate(${i.rotation}deg)`}},(0,t.createElement)("path",{d:i.pathData,fill:"none",stroke:"#6366f1",strokeWidth:"2"}))}return(0,t.createElement)("div",{key:e.id,style:o,onMouseDown:t=>((e,t)=>{e.stopPropagation(),a(t.id),u({id:t.id,startX:e.clientX,startY:e.clientY,origX:t.x,origY:t.y})})(t,e)},r,(0,t.createElement)("div",{style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",background:"#6366f1",color:"#fff",padding:"1px 6px",borderRadius:"3px",whiteSpace:"nowrap"}},d[e.type].label))}))}function u({shape:e,onUpdate:l}){if(!e)return(0,t.createElement)("div",{style:{padding:"20px",color:"rgba(255,255,255,0.5)",textAlign:"center"}},"Select a shape to edit its properties");const a=(t,a)=>{l(e.id,{props:{...e.props,[t]:a}})},o=(t,a)=>{l(e.id,{timing:{...e.timing,[t]:a}})},r=(t,a,n)=>{const o=[...e.random[t]];o[a]=n,l(e.id,{random:{...e.random,[t]:o}})};return(0,t.createElement)("div",{style:{padding:"12px",overflowY:"auto",height:"100%"}},(0,t.createElement)("h4",{style:{margin:"0 0 12px",color:"#fff",fontSize:"14px"}},d[e.type].icon," ",d[e.type].label," Properties"),(0,t.createElement)("div",{style:{marginBottom:"16px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Position"),(0,t.createElement)("div",{style:{display:"flex",gap:"8px"}},(0,t.createElement)(n.RangeControl,{label:"X %",value:e.x,onChange:t=>l(e.id,{x:t}),min:0,max:100,step:1})),(0,t.createElement)(n.RangeControl,{label:"Y %",value:e.y,onChange:t=>l(e.id,{y:t}),min:0,max:100,step:1})),(0,t.createElement)("div",{style:{marginBottom:"16px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Color"),(0,t.createElement)(n.SelectControl,{value:e.colorMode||"gradient",onChange:t=>l(e.id,{colorMode:t}),options:[{label:"Gradient (animated)",value:"gradient"},{label:"Fixed Color",value:"fixed"}]}),"fixed"===e.colorMode&&(0,t.createElement)("div",{style:{marginTop:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",display:"block",marginBottom:"4px"}},"Color"),(0,t.createElement)("input",{type:"color",value:e.color||"#ff6b6b",onChange:t=>l(e.id,{color:t.target.value}),style:{width:"100%",height:"36px",cursor:"pointer",border:"none",borderRadius:"4px"}})),("gradient"===e.colorMode||!e.colorMode)&&(0,t.createElement)(n.RangeControl,{label:"Color Speed",value:e.colorSpeed||1,onChange:t=>l(e.id,{colorSpeed:t}),min:0,max:10,step:.5,help:"Hue shift during animation (0 = solid)"}),(0,t.createElement)(n.ToggleControl,{label:"Randomize color each repeat",checked:!1!==e.randomizeColor,onChange:t=>l(e.id,{randomizeColor:t})})),(0,t.createElement)(n.RangeControl,{label:"Force",value:e.force||1,onChange:t=>l(e.id,{force:t}),min:.1,max:5,step:.1,help:"Fluid intensity (1 = normal)"}),"stroke"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.RangeControl,{label:"Length",value:e.props.length,onChange:e=>a("length",e),min:20,max:800}),(0,t.createElement)(n.RangeControl,{label:"Angle",value:e.props.angle,onChange:e=>a("angle",e),min:0,max:360}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),"circle"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.RangeControl,{label:"Radius",value:e.props.radius,onChange:e=>a("radius",e),min:10,max:500}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),"ellipse"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.RangeControl,{label:"Radius X",value:e.props.radiusX,onChange:e=>a("radiusX",e),min:10,max:500}),(0,t.createElement)(n.RangeControl,{label:"Radius Y",value:e.props.radiusY,onChange:e=>a("radiusY",e),min:10,max:500}),(0,t.createElement)(n.RangeControl,{label:"Rotation",value:e.props.rotation,onChange:e=>a("rotation",e),min:0,max:360}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),"rectangle"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.RangeControl,{label:"Width",value:e.props.width,onChange:e=>a("width",e),min:20,max:600}),(0,t.createElement)(n.RangeControl,{label:"Height",value:e.props.height,onChange:e=>a("height",e),min:20,max:600}),(0,t.createElement)(n.RangeControl,{label:"Rotation",value:e.props.rotation,onChange:e=>a("rotation",e),min:0,max:360}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),"svg"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.TextControl,{label:"SVG Path Data",value:e.props.pathData,onChange:e=>a("pathData",e)}),(0,t.createElement)(n.RangeControl,{label:"Scale",value:e.props.scale,onChange:e=>a("scale",e),min:.1,max:10,step:.1}),(0,t.createElement)(n.RangeControl,{label:"Rotation",value:e.props.rotation,onChange:e=>a("rotation",e),min:0,max:360}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),"path"===e.type&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",margin:"0 0 8px"}},e.props.points?.length||0," points defined"),(0,t.createElement)(n.RangeControl,{label:"Scale",value:e.props.scale||1,onChange:e=>a("scale",e),min:.1,max:10,step:.1}),(0,t.createElement)(n.RangeControl,{label:"Speed",value:e.props.speed,onChange:e=>a("speed",e),min:.1,max:10,step:.1})),(0,t.createElement)("hr",{style:{border:"none",borderTop:"1px solid rgba(255,255,255,0.1)",margin:"16px 0"}}),(0,t.createElement)("h4",{style:{margin:"0 0 12px",color:"#fff",fontSize:"13px"}},"â± Timing"),(0,t.createElement)(n.RangeControl,{label:"Delay (ms)",value:e.timing.delay,onChange:e=>o("delay",e),min:0,max:2e4,step:50}),(0,t.createElement)(n.RangeControl,{label:"Duration (ms)",value:e.timing.duration,onChange:e=>o("duration",e),min:100,max:1e4,step:50}),(0,t.createElement)(n.RangeControl,{label:"Repeat",value:e.timing.repeat,onChange:e=>o("repeat",e),min:0,max:1e3}),e.timing.repeat>0&&(0,t.createElement)(n.RangeControl,{label:"Repeat Delay (ms)",value:e.timing.repeatDelay,onChange:e=>o("repeatDelay",e),min:0,max:1e4,step:50}),(0,t.createElement)("hr",{style:{border:"none",borderTop:"1px solid rgba(255,255,255,0.1)",margin:"16px 0"}}),(0,t.createElement)("h4",{style:{margin:"0 0 12px",color:"#fff",fontSize:"13px"}},"ðŸŽ² Randomization"),(0,t.createElement)("p",{style:{fontSize:"10px",color:"rgba(255,255,255,0.5)",margin:"0 0 8px"}},"Min/Max offset for each property"),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Position X: Â±",e.random.x[1],"%"),(0,t.createElement)(n.RangeControl,{value:e.random.x[1],onChange:e=>{r("x",0,-e),r("x",1,e)},min:0,max:30,step:1,withInputField:!1})),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Position Y: Â±",e.random.y[1],"%"),(0,t.createElement)(n.RangeControl,{value:e.random.y[1],onChange:e=>{r("y",0,-e),r("y",1,e)},min:0,max:30,step:1,withInputField:!1})),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Angle: Â±",e.random.angle[1],"Â°"),(0,t.createElement)(n.RangeControl,{value:e.random.angle[1],onChange:e=>{r("angle",0,-e),r("angle",1,e)},min:0,max:180,step:5,withInputField:!1})),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Speed: Â±",e.random.speed[1].toFixed(1),"x"),(0,t.createElement)(n.RangeControl,{value:e.random.speed[1],onChange:e=>{r("speed",0,-e),r("speed",1,e)},min:0,max:1,step:.1,withInputField:!1})),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Size (radius/dimensions): Â±",(e.random.size?.[1]||0).toFixed(0),"%"),(0,t.createElement)(n.RangeControl,{value:e.random.size?.[1]||0,onChange:e=>{r("size",0,-e),r("size",1,e)},min:0,max:100,step:5,withInputField:!1})),(0,t.createElement)("div",{style:{marginBottom:"8px"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)"}},"Force: Â±",(e.random.force?.[1]||0).toFixed(1),"x"),(0,t.createElement)(n.RangeControl,{value:e.random.force?.[1]||0,onChange:e=>{r("force",0,-e),r("force",1,e)},min:0,max:2,step:.1,withInputField:!1})))}function g({isOpen:e,onClose:a,shapes:r,onSave:g}){const[p,b]=(0,o.useState)(r||[]),[h,f]=(0,o.useState)(null),[C,x]=(0,o.useState)(!1),[v,E]=(0,o.useState)([]),[y,k]=(0,o.useState)(null),_=p.find(e=>e.id===h),S=()=>{if(y&&v.length>1){const e=v.map(e=>({x:e.x,y:e.y}));M(y,{props:{points:e,speed:1},x:v[0].x,y:v[0].y})}else y&&v.length<=1&&B(y);x(!1),E([]),k(null)},w=(0,o.useCallback)(e=>{if(!C)return;const t=e.currentTarget.getBoundingClientRect(),l=(e.clientX-t.left)/t.width*100,a=(e.clientY-t.top)/t.height*100;E(e=>[...e,{x:l,y:a}])},[C]),R=(0,o.useCallback)(e=>{C&&(e.stopPropagation(),S())},[C,v,y]),M=(e,t)=>{b(p.map(l=>l.id===e?{...l,...t}:l))},B=e=>{b(p.filter(t=>t.id!==e)),h===e&&f(null)};return e?(0,t.createElement)(n.Modal,{title:(0,l.__)("Initial Shapes Editor","fluid-gradient-block"),onRequestClose:a,isFullScreen:!0,className:"fgb-shapes-modal"},(0,t.createElement)("style",null,"\n                .fgb-shapes-modal .components-modal__content {\n                    padding: 0 !important;\n                    background: #0f0f1a !important;\n                }\n                .fgb-shapes-modal .components-modal__header {\n                    background: rgba(99, 102, 241, 0.2) !important;\n                    border-bottom: 1px solid rgba(255,255,255,0.1) !important;\n                }\n                .fgb-shapes-modal .components-modal__header-heading {\n                    color: #fff !important;\n                }\n                .fgb-shapes-modal .components-range-control__wrapper {\n                    margin-bottom: 8px;\n                }\n                .fgb-shapes-modal .components-base-control__label {\n                    color: rgba(255,255,255,0.7) !important;\n                    font-size: 11px !important;\n                }\n            "),(0,t.createElement)("div",{style:{display:"flex",height:"calc(100vh - 180px)"}},(0,t.createElement)("div",{style:{width:"220px",borderRight:"1px solid rgba(255,255,255,0.1)",display:"flex",flexDirection:"column"}},(0,t.createElement)("div",{style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)"}},(0,t.createElement)("label",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",marginBottom:"6px",display:"block"}},"Add Shape"),(0,t.createElement)("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap"}},Object.entries(d).map(([e,l])=>(0,t.createElement)(n.Button,{key:e,variant:"secondary",onClick:()=>(e=>{const t=s(e);"path"===e?(b([...p,t]),f(t.id),k(t.id),x(!0),E([])):(b([...p,t]),f(t.id))})(e),style:{padding:"4px 8px",fontSize:"12px"}},l.icon)))),(0,t.createElement)("div",{style:{padding:"12px",borderBottom:"1px solid rgba(255,255,255,0.1)"}},(0,t.createElement)(n.SelectControl,{label:"Presets",value:"",onChange:e=>{const t=c[e];t&&(b(t.generate()),f(null))},options:[{label:"Choose preset...",value:""},...Object.entries(c).map(([e,t])=>({label:t.name,value:e}))]})),(0,t.createElement)("div",{style:{flex:1,overflowY:"auto",padding:"8px"}},0===p.length?(0,t.createElement)("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",textAlign:"center",padding:"20px"}},"No shapes yet. Add a shape or choose a preset."):p.map((e,l)=>(0,t.createElement)("div",{key:e.id,onClick:()=>f(e.id),style:{padding:"8px 10px",marginBottom:"4px",background:h===e.id?"rgba(99, 102, 241, 0.3)":"rgba(255,255,255,0.05)",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"}},(0,t.createElement)("span",{style:{color:"#fff",fontSize:"12px"}},d[e.type].icon," ",d[e.type].label," ",l+1),(0,t.createElement)("div",{style:{display:"flex",gap:"4px"}},(0,t.createElement)(n.Button,{isSmall:!0,variant:"tertiary",onClick:t=>{t.stopPropagation(),(e=>{const t=p.find(t=>t.id===e);if(t){const e={...t,id:i(),x:t.x+5,y:t.y+5};b([...p,e]),f(e.id)}})(e.id)}},"âŽ˜"),(0,t.createElement)(n.Button,{isSmall:!0,variant:"tertiary",onClick:t=>{t.stopPropagation(),B(e.id)},isDestructive:!0},"Ã—"))))),(0,t.createElement)("div",{style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.1)"}},(0,t.createElement)(n.Button,{variant:"secondary",onClick:()=>{b([]),f(null)},isDestructive:!0,style:{width:"100%"}},"Clear All"))),(0,t.createElement)("div",{style:{flex:1,padding:"20px"},onClick:w,onDoubleClick:R},(0,t.createElement)(m,{shapes:p,selectedId:h,onSelectShape:C?()=>{}:f,onUpdateShape:M,drawingMode:C,drawingPoints:v,setDrawingPoints:E,onDrawingComplete:S})),(0,t.createElement)("div",{style:{width:"280px",borderLeft:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)"}},(0,t.createElement)(u,{shape:_,onUpdate:M}))),(0,t.createElement)("div",{style:{padding:"12px 20px",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(0,0,0,0.3)"}},(0,t.createElement)("span",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px"}},p.length," shape",1!==p.length?"s":""," configured"),(0,t.createElement)("div",{style:{display:"flex",gap:"8px"}},(0,t.createElement)(n.Button,{variant:"secondary",onClick:a},"Cancel"),(0,t.createElement)(n.Button,{variant:"primary",onClick:()=>{g(p),a()}},"Save Shapes")))):null}const p=[{label:"Color Saturation",value:"colorSaturation",min:0,max:5,step:.1},{label:"Color Brightness",value:"colorBrightness",min:0,max:1,step:.01},{label:"Fade Speed",value:"fadeSpeed",min:.01,max:15,step:.01},{label:"Curl (Vorticity)",value:"curl",min:0,max:100,step:1},{label:"Splat Radius",value:"splatRadius",min:.05,max:1,step:.05},{label:"Splat Force",value:"splatForce",min:0,max:5e4,step:500},{label:"Projection Distance",value:"projectionDistance",min:.5,max:5,step:.25},{label:"CSS Saturate Filter (%)",value:"cssSaturate",min:0,max:300,step:5},{label:"Animation Speed",value:"animationSpeed",min:.01,max:3,step:.01}],b=e=>p.find(t=>t.value===e)||p[0];function h({isOpen:e,onClose:a,scrollAnimations:r,onSave:i,fluidSettings:d}){const[s,c]=(0,o.useState)(r||{enabled:!1,rules:[]}),[m,u]=(0,o.useState)(null),g=e=>{c(t=>({...t,...e}))},h=(e,t)=>{g({rules:s.rules.map(l=>l.id===e?{...l,...t}:l)})},f=()=>{c(r||{enabled:!1,rules:[]}),a()};return e?(0,t.createElement)(n.Modal,{title:(0,l.__)("Scroll Animations","fluid-gradient-block"),onRequestClose:f,style:{maxWidth:"700px",width:"100%"}},(0,t.createElement)("div",{style:{marginBottom:"20px"}},(0,t.createElement)(n.ToggleControl,{label:(0,l.__)("Enable Scroll Animations","fluid-gradient-block"),checked:s.enabled,onChange:e=>g({enabled:e}),help:(0,l.__)("Animate fluid settings based on page scroll position","fluid-gradient-block")})),s.enabled&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{style:{marginBottom:"20px"}},(0,t.createElement)(n.__experimentalHeading,{level:4,style:{marginBottom:"10px"}},(0,l.__)("Animation Rules","fluid-gradient-block")),(0,t.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginBottom:"12px"}},(0,l.__)("Define how settings change as the user scrolls. Values interpolate linearly between scroll positions.","fluid-gradient-block"))),s.rules.map((e,a)=>{const o=b(e.property),r=m===e.id;return(0,t.createElement)(n.Card,{key:e.id,style:{marginBottom:"12px"},isBorderless:!1},(0,t.createElement)(n.CardHeader,{style:{cursor:"pointer",padding:"12px 16px"},onClick:()=>u(r?null:e.id)},(0,t.createElement)(n.Flex,{align:"center"},(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)("strong",null,"Rule ",a+1,":")," ",o.label," ",(0,t.createElement)("span",{style:{color:"#757575"}},"(",e.scrollStart,"px â†’ ",e.scrollEnd,"px: ",e.valueStart," â†’ ",e.valueEnd,")")),(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.Button,{isDestructive:!0,size:"small",onClick:t=>{var l;t.stopPropagation(),l=e.id,g({rules:s.rules.filter(e=>e.id!==l)}),m===l&&u(null)}},(0,l.__)("Delete","fluid-gradient-block"))))),r&&(0,t.createElement)(n.CardBody,{style:{borderTop:"1px solid #ddd"}},(0,t.createElement)(n.SelectControl,{label:(0,l.__)("Property","fluid-gradient-block"),value:e.property,options:p.map(e=>({label:e.label,value:e.value})),onChange:t=>{var l;const a=b(t);h(e.id,{property:t,valueStart:null!==(l=d[t])&&void 0!==l?l:a.min,valueEnd:a.min})}}),(0,t.createElement)(n.Flex,{style:{marginBottom:"16px"}},(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Scroll Start (px)","fluid-gradient-block"),type:"number",value:e.scrollStart,onChange:t=>h(e.id,{scrollStart:parseInt(t)||0})})),(0,t.createElement)(n.FlexBlock,{style:{marginLeft:"12px"}},(0,t.createElement)(n.TextControl,{label:(0,l.__)("Scroll End (px)","fluid-gradient-block"),type:"number",value:e.scrollEnd,onChange:t=>h(e.id,{scrollEnd:parseInt(t)||0})}))),(0,t.createElement)(n.RangeControl,{label:(0,l.__)("Value Start","fluid-gradient-block"),value:e.valueStart,onChange:t=>h(e.id,{valueStart:t}),min:o.min,max:o.max,step:o.step}),(0,t.createElement)(n.RangeControl,{label:(0,l.__)("Value End","fluid-gradient-block"),value:e.valueEnd,onChange:t=>h(e.id,{valueEnd:t}),min:o.min,max:o.max,step:o.step})))}),(0,t.createElement)(n.Button,{variant:"secondary",onClick:()=>{const e={id:`rule_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,property:"colorSaturation",scrollStart:0,scrollEnd:500,valueStart:1,valueEnd:.5};g({rules:[...s.rules,e]}),u(e.id)},style:{marginTop:"8px"}},(0,l.__)("+ Add Animation Rule","fluid-gradient-block"))),(0,t.createElement)("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #ddd"}},(0,t.createElement)(n.Flex,{justify:"flex-end"},(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.Button,{variant:"tertiary",onClick:f},(0,l.__)("Cancel","fluid-gradient-block"))),(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.Button,{variant:"primary",onClick:()=>{i(s),a()}},(0,l.__)("Save","fluid-gradient-block")))))):null}const f=(0,o.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:24,height:24},(0,o.createElement)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})),C=(0,o.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:24,height:24},(0,o.createElement)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})),x=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"fgb/fluid-group","version":"1.0.0","title":"Fluid Gradient Group","category":"design","icon":"slides","description":"A container block with optional WebGL fluid dynamics background.","keywords":["fluid","gradient","animation","group","container","webgl"],"textdomain":"fluid-gradient-block","attributes":{"enableFluid":{"type":"boolean","default":false},"fluidSettings":{"type":"object","default":{"preset":"default","simResolution":128,"dyeResolution":1024,"densityDissipation":0.97,"velocityDissipation":0.98,"pressure":0.8,"curl":30,"splatRadius":0.25,"splatForce":6000,"projectionDistance":1,"fadeSpeed":1,"calmDown":false,"calmDownDelay":2000,"calmDownStrength":0.9,"bloom":true,"bloomIntensity":0.8,"bloomThreshold":0.6,"colorSaturation":1,"colorBrightness":0.15,"saturationBoost":1,"fixedColor":"#ff00ff","colorChangeDistance":0,"colorMode":"rainbow","hueMin":0,"hueMax":360,"gradientSpeed":0.5,"paletteColors":["#ff0000","#00ff00","#0000ff"],"rainbowMode":true,"preventOverblending":false,"maxColorIntensity":1,"darkMode":false,"cursorMode":"default","dotCursor":{"size":10,"color":"#ffffff"},"crosshairCursor":{"thickness":1,"color":"#ffffff"},"siblingHoverMode":false,"blendMode":"normal","negativeBloom":false,"cssSaturate":100,"animationSpeed":1,"scrollAnimations":{"enabled":false,"rules":[]},"elementInteraction":{"enabled":false,"selectors":"","trackScroll":false,"mode":"hardCorner","softEdgeRadius":20,"forceFieldStrength":50,"forceFieldRadius":80,"attractFieldStrength":50,"attractFieldRadius":80,"turbulenceIntensity":30,"turbulenceScale":50,"affectNewSplats":true,"affectExistingFluid":false,"edgeGlow":false,"edgeGlowIntensity":0.5,"edgeGlowDistance":15,"edgeGlowMatchFluid":true,"edgeGlowColor":"#ffffff"}}},"tagName":{"type":"string","default":"div"},"minHeight":{"type":"string"},"backgroundColor":{"type":"string"},"initialShapes":{"type":"array","default":[]}},"supports":{"anchor":true,"align":["wide","full"],"html":false,"background":{"backgroundImage":true,"backgroundSize":true},"color":{"gradients":true,"heading":true,"button":true,"link":true,"text":true,"background":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"dimensions":{"minHeight":true},"position":{"sticky":true},"typography":{"fontSize":true,"lineHeight":true},"layout":{"allowSizingOnChildren":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css","viewScript":"file:./view.js"}');(0,e.registerBlockType)(x.name,{...x,edit:function({attributes:e,setAttributes:i,clientId:d}){var s,c,m,u,p,b,x,v,E,y,k,_,S,w,R,M,B,F;const{enableFluid:D,fluidSettings:z,initialShapes:I}=e,[T,A]=(0,o.useState)(!1),[P,G]=(0,o.useState)(!1),[O,N]=(0,o.useState)(!1),L=!(0,r.useSelect)(e=>{const{getBlockOrder:t}=e("core/block-editor");return t(d).length>0},[d]),H=(e,t)=>{i({fluidSettings:{...z,[e]:t}})},$=(e,t)=>{i({fluidSettings:{...z,elementInteraction:{...z.elementInteraction,[e]:t}}})},j=z.elementInteraction||{},Y=z.scrollAnimations||{enabled:!1,rules:[]},X=(0,a.useBlockProps)({className:`fgb-fluid-group ${D?"has-fluid-background":""} ${T?"fgb-hidden-in-editor":""} ${L?"fgb-compact-mode":""}`,style:L?{height:"200px",minHeight:"200px",maxHeight:"200px"}:void 0});return(0,o.createElement)(t.Fragment,null,(0,o.createElement)(a.BlockControls,null,(0,o.createElement)(n.ToolbarGroup,null,(0,o.createElement)(n.ToolbarButton,{icon:T?C:f,label:T?(0,l.__)("Show Block","fluid-gradient-block"):(0,l.__)("Hide Block","fluid-gradient-block"),onClick:()=>A(!T),isPressed:T}))),(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Fluid Background","fluid-gradient-block"),initialOpen:!0},(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Enable Fluid Dynamics","fluid-gradient-block"),checked:D,onChange:e=>i({enableFluid:e}),help:D?(0,l.__)("WebGL fluid animation is enabled","fluid-gradient-block"):(0,l.__)("Enable interactive fluid background","fluid-gradient-block")})),D&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Simulation","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Simulation Resolution","fluid-gradient-block"),value:z.simResolution,onChange:e=>H("simResolution",e),min:32,max:256,step:16}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Dye Resolution","fluid-gradient-block"),value:z.dyeResolution,onChange:e=>H("dyeResolution",e),min:256,max:2048,step:128})),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Behavior","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Density Dissipation","fluid-gradient-block"),value:z.densityDissipation,onChange:e=>H("densityDissipation",e),min:0,max:1,step:.01}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Velocity Dissipation","fluid-gradient-block"),value:z.velocityDissipation,onChange:e=>H("velocityDissipation",e),min:0,max:1,step:.01}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Pressure","fluid-gradient-block"),value:z.pressure,onChange:e=>H("pressure",e),min:0,max:1,step:.05}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Curl (Vorticity)","fluid-gradient-block"),value:z.curl,onChange:e=>H("curl",e),min:0,max:100}),(0,o.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Calm Down Mode","fluid-gradient-block"),checked:z.calmDown,onChange:e=>H("calmDown",e),help:(0,l.__)("Reduce jiggle after period of no input","fluid-gradient-block")}),z.calmDown&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Calm Down Delay (ms)","fluid-gradient-block"),value:null!==(s=z.calmDownDelay)&&void 0!==s?s:2e3,onChange:e=>H("calmDownDelay",e),min:500,max:1e4,step:500,help:(0,l.__)("Time after last input before calming starts","fluid-gradient-block")}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Damping Strength","fluid-gradient-block"),value:null!==(c=z.calmDownStrength)&&void 0!==c?c:.9,onChange:e=>H("calmDownStrength",e),min:.5,max:.99,step:.01,help:(0,l.__)("Lower = faster calming (more damping)","fluid-gradient-block")}))),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Mouse Input","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Splat Radius","fluid-gradient-block"),value:z.splatRadius,onChange:e=>H("splatRadius",e),min:.05,max:1,step:.05}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Splat Force","fluid-gradient-block"),value:z.splatForce,onChange:e=>H("splatForce",e),min:0,max:5e4,step:500}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Projection Distance","fluid-gradient-block"),value:z.projectionDistance||1,onChange:e=>H("projectionDistance",e),min:.5,max:5,step:.25,help:(0,l.__)("How far colors shoot in mouse direction","fluid-gradient-block")})),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Bloom Effect","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Enable Bloom","fluid-gradient-block"),checked:z.bloom,onChange:e=>H("bloom",e)}),z.bloom&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Bloom Intensity","fluid-gradient-block"),value:z.bloomIntensity,onChange:e=>H("bloomIntensity",e),min:0,max:2,step:.1}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Bloom Threshold","fluid-gradient-block"),value:z.bloomThreshold,onChange:e=>H("bloomThreshold",e),min:0,max:1,step:.05}))),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Colors","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Color Saturation","fluid-gradient-block"),value:z.colorSaturation,onChange:e=>H("colorSaturation",e),min:0,max:5,step:.1}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Color Brightness","fluid-gradient-block"),value:z.colorBrightness,onChange:e=>H("colorBrightness",e),min:0,max:1,step:.01}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Saturation Boost","fluid-gradient-block"),value:z.saturationBoost||1,onChange:e=>H("saturationBoost",e),min:1,max:3,step:.1,help:(0,l.__)("Boost saturation for more vivid colors","fluid-gradient-block")}),(0,o.createElement)(n.SelectControl,{label:(0,l.__)("Color Mode","fluid-gradient-block"),value:z.colorMode||"rainbow",options:[{label:"Full Rainbow (Random)",value:"rainbow"},{label:"Limited Hue Range",value:"huerange"},{label:"Smooth Gradient",value:"gradient"},{label:"Single Color",value:"single"}],onChange:e=>{i({fluidSettings:{...z,colorMode:e,rainbowMode:"single"!==e}})}}),("rainbow"===z.colorMode||"huerange"===z.colorMode||!z.colorMode)&&(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Color Change Distance","fluid-gradient-block"),value:z.colorChangeDistance||0,onChange:e=>H("colorChangeDistance",e),min:0,max:500,step:10,help:(0,l.__)("Pixels to move before new color (0 = every frame)","fluid-gradient-block")}),"huerange"===z.colorMode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Hue Min (Â°)","fluid-gradient-block"),value:null!==(m=z.hueMin)&&void 0!==m?m:0,onChange:e=>H("hueMin",e),min:0,max:360,step:5,help:(0,l.__)("0=Red, 60=Yellow, 120=Green, 180=Cyan, 240=Blue, 300=Magenta","fluid-gradient-block")}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Hue Max (Â°)","fluid-gradient-block"),value:null!==(u=z.hueMax)&&void 0!==u?u:360,onChange:e=>H("hueMax",e),min:0,max:360,step:5})),"gradient"===z.colorMode&&(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Gradient Speed","fluid-gradient-block"),value:null!==(p=z.gradientSpeed)&&void 0!==p?p:.5,onChange:e=>H("gradientSpeed",e),min:.01,max:10,step:.01,help:(0,l.__)("How fast colors shift through the spectrum","fluid-gradient-block")}),"single"===z.colorMode&&(0,o.createElement)("div",{className:"components-base-control"},(0,o.createElement)("label",{className:"components-base-control__label"},(0,l.__)("Fixed Color","fluid-gradient-block")),(0,o.createElement)("input",{type:"color",value:z.fixedColor||"#ff00ff",onChange:e=>H("fixedColor",e.target.value),style:{width:"100%",height:"36px",cursor:"pointer"}})),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Prevent Overblending","fluid-gradient-block"),checked:z.preventOverblending,onChange:e=>H("preventOverblending",e),help:(0,l.__)("Clamps max color intensity to prevent white-out","fluid-gradient-block")}),z.preventOverblending&&(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Max Color Intensity","fluid-gradient-block"),value:z.maxColorIntensity||1,onChange:e=>H("maxColorIntensity",e),min:.5,max:2,step:.1}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Dark Fluid Mode","fluid-gradient-block"),checked:z.darkMode,onChange:e=>H("darkMode",e),help:(0,l.__)("Creates dark fluid effect (use with light background)","fluid-gradient-block")}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Fade Speed","fluid-gradient-block"),value:z.fadeSpeed||1,onChange:e=>H("fadeSpeed",e),min:.01,max:15,step:.01,help:(0,l.__)("How quickly colors fade out (higher = faster)","fluid-gradient-block")}),(0,o.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,o.createElement)(n.SelectControl,{label:(0,l.__)("Cursor Mode","fluid-gradient-block"),value:z.cursorMode||"default",options:[{label:"Default",value:"default"},{label:"Hidden",value:"hidden"},{label:"Dot",value:"dot"},{label:"Crosshair",value:"crosshair"}],onChange:e=>H("cursorMode",e),help:(0,l.__)("Choose how the cursor appears over the block","fluid-gradient-block")}),"dot"===z.cursorMode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Dot Size","fluid-gradient-block"),value:null!==(b=z.dotCursor?.size)&&void 0!==b?b:10,onChange:e=>i({fluidSettings:{...z,dotCursor:{...z.dotCursor,size:e}}}),min:4,max:50,step:2}),(0,o.createElement)("div",{className:"components-base-control"},(0,o.createElement)("label",{className:"components-base-control__label"},(0,l.__)("Dot Color","fluid-gradient-block")),(0,o.createElement)("input",{type:"color",value:z.dotCursor?.color||"#ffffff",onChange:e=>i({fluidSettings:{...z,dotCursor:{...z.dotCursor,color:e.target.value}}}),style:{width:"100%",height:"36px",cursor:"pointer"}}))),"crosshair"===z.cursorMode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Line Thickness","fluid-gradient-block"),value:null!==(x=z.crosshairCursor?.thickness)&&void 0!==x?x:1,onChange:e=>i({fluidSettings:{...z,crosshairCursor:{...z.crosshairCursor,thickness:e}}}),min:1,max:10,step:1}),(0,o.createElement)("div",{className:"components-base-control"},(0,o.createElement)("label",{className:"components-base-control__label"},(0,l.__)("Line Color","fluid-gradient-block")),(0,o.createElement)("input",{type:"color",value:z.crosshairCursor?.color||"#ffffff",onChange:e=>i({fluidSettings:{...z,crosshairCursor:{...z.crosshairCursor,color:e.target.value}}}),style:{width:"100%",height:"36px",cursor:"pointer"}}))),(0,o.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Sibling Hover Mode","fluid-gradient-block"),checked:z.siblingHoverMode,onChange:e=>H("siblingHoverMode",e),help:(0,l.__)("Track mouse through overlapping sibling elements. Use when content is placed outside the block but visually overlays it (e.g., sticky layouts).","fluid-gradient-block")})),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Blend Mode","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.SelectControl,{label:(0,l.__)("Canvas Blend Mode","fluid-gradient-block"),value:z.blendMode||"normal",options:[{label:"Normal",value:"normal"},{label:"Multiply",value:"multiply"},{label:"Screen",value:"screen"},{label:"Overlay",value:"overlay"},{label:"Darken",value:"darken"},{label:"Lighten",value:"lighten"},{label:"Color Dodge",value:"color-dodge"},{label:"Color Burn",value:"color-burn"},{label:"Hard Light",value:"hard-light"},{label:"Soft Light",value:"soft-light"},{label:"Difference",value:"difference"},{label:"Exclusion",value:"exclusion"},{label:"Hue",value:"hue"},{label:"Saturation",value:"saturation"},{label:"Color",value:"color"},{label:"Luminosity",value:"luminosity"}],onChange:e=>H("blendMode",e)}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Negative Bloom","fluid-gradient-block"),checked:z.negativeBloom,onChange:e=>H("negativeBloom",e),help:(0,l.__)("Inverts colors for a dark glow effect","fluid-gradient-block")})),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Element Interaction","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Enable Element Interaction","fluid-gradient-block"),checked:j.enabled,onChange:e=>$("enabled",e),help:(0,l.__)("Allow DOM elements to interact with fluid","fluid-gradient-block")}),j.enabled&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.TextControl,{label:(0,l.__)("CSS Selectors","fluid-gradient-block"),value:j.selectors||"",onChange:e=>$("selectors",e),placeholder:".my-class, #my-id",help:(0,l.__)("Comma-separated CSS selectors for interacting elements","fluid-gradient-block")}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Track on Scroll","fluid-gradient-block"),checked:j.trackScroll,onChange:e=>$("trackScroll",e),help:(0,l.__)("Update element positions on page scroll","fluid-gradient-block")}),(0,o.createElement)(n.SelectControl,{label:(0,l.__)("Interaction Mode","fluid-gradient-block"),value:j.mode||"hardCorner",options:[{label:"Hard Corner (Blocks fluid)",value:"hardCorner"},{label:"Soft Edge (Gradual fade)",value:"softEdge"},{label:"Force Field (Repels fluid)",value:"forceField"},{label:"Attract Field (Pulls fluid)",value:"attractField"},{label:"Turbulence (Creates swirls)",value:"turbulence"}],onChange:e=>$("mode",e)}),"softEdge"===j.mode&&(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Soft Edge Radius","fluid-gradient-block"),value:null!==(v=j.softEdgeRadius)&&void 0!==v?v:20,onChange:e=>$("softEdgeRadius",e),min:5,max:100,step:5,help:(0,l.__)("Fade distance in pixels","fluid-gradient-block")}),"forceField"===j.mode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Force Strength","fluid-gradient-block"),value:null!==(E=j.forceFieldStrength)&&void 0!==E?E:50,onChange:e=>$("forceFieldStrength",e),min:10,max:200,step:10}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Force Radius","fluid-gradient-block"),value:null!==(y=j.forceFieldRadius)&&void 0!==y?y:80,onChange:e=>$("forceFieldRadius",e),min:20,max:300,step:10,help:(0,l.__)("Distance of force effect in pixels","fluid-gradient-block")})),"attractField"===j.mode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Attract Strength","fluid-gradient-block"),value:null!==(k=j.attractFieldStrength)&&void 0!==k?k:50,onChange:e=>$("attractFieldStrength",e),min:10,max:200,step:10}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Attract Radius","fluid-gradient-block"),value:null!==(_=j.attractFieldRadius)&&void 0!==_?_:80,onChange:e=>$("attractFieldRadius",e),min:20,max:300,step:10})),"turbulence"===j.mode&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Turbulence Intensity","fluid-gradient-block"),value:null!==(S=j.turbulenceIntensity)&&void 0!==S?S:30,onChange:e=>$("turbulenceIntensity",e),min:5,max:100,step:5}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Turbulence Scale","fluid-gradient-block"),value:null!==(w=j.turbulenceScale)&&void 0!==w?w:50,onChange:e=>$("turbulenceScale",e),min:10,max:200,step:10})),(0,o.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Affect New Splats","fluid-gradient-block"),checked:!1!==j.affectNewSplats,onChange:e=>$("affectNewSplats",e),help:(0,l.__)("Apply effects to new fluid being created","fluid-gradient-block")}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Affect Existing Fluid","fluid-gradient-block"),checked:j.affectExistingFluid,onChange:e=>$("affectExistingFluid",e),help:(0,l.__)("Apply effects to fluid already on canvas","fluid-gradient-block")}),(0,o.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Edge Glow","fluid-gradient-block"),checked:j.edgeGlow,onChange:e=>$("edgeGlow",e),help:(0,l.__)("Add a color glow around element edges","fluid-gradient-block")}),j.edgeGlow&&(0,o.createElement)(t.Fragment,null,(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Glow Intensity","fluid-gradient-block"),value:null!==(R=j.edgeGlowIntensity)&&void 0!==R?R:.5,onChange:e=>$("edgeGlowIntensity",e),min:.1,max:2,step:.1}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Glow Distance","fluid-gradient-block"),value:null!==(M=j.edgeGlowDistance)&&void 0!==M?M:15,onChange:e=>$("edgeGlowDistance",e),min:5,max:50,step:5}),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Match Fluid Colors","fluid-gradient-block"),checked:j.edgeGlowMatchFluid,onChange:e=>$("edgeGlowMatchFluid",e)}),!j.edgeGlowMatchFluid&&(0,o.createElement)("div",{className:"components-base-control"},(0,o.createElement)("label",{className:"components-base-control__label"},(0,l.__)("Glow Color","fluid-gradient-block")),(0,o.createElement)("input",{type:"color",value:j.edgeGlowColor||"#ffffff",onChange:e=>$("edgeGlowColor",e.target.value),style:{width:"100%",height:"36px",cursor:"pointer"}}))))),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Scroll Animations","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginBottom:"12px"}},(0,l.__)("Animate fluid settings based on page scroll position.","fluid-gradient-block")),(0,o.createElement)(n.ToggleControl,{label:(0,l.__)("Enable Scroll Animations","fluid-gradient-block"),checked:Y.enabled,onChange:e=>((e,t)=>{i({fluidSettings:{...z,scrollAnimations:{...z.scrollAnimations,[e]:t}}})})("enabled",e)}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("CSS Saturate Filter (%)","fluid-gradient-block"),value:null!==(B=z.cssSaturate)&&void 0!==B?B:100,onChange:e=>H("cssSaturate",e),min:0,max:300,step:5,help:(0,l.__)("Apply CSS saturate filter to canvas colors","fluid-gradient-block")}),(0,o.createElement)(n.RangeControl,{label:(0,l.__)("Animation Speed","fluid-gradient-block"),value:null!==(F=z.animationSpeed)&&void 0!==F?F:1,onChange:e=>H("animationSpeed",e),min:.01,max:3,step:.01,help:(0,l.__)("Control overall canvas animation speed","fluid-gradient-block")}),(0,o.createElement)("p",{style:{fontSize:"13px",marginBottom:"12px"}},(0,o.createElement)("strong",null,Y.rules?.length||0)," ",(0,l.__)("animation rule(s) configured","fluid-gradient-block")),(0,o.createElement)(n.Button,{variant:"secondary",onClick:()=>N(!0),style:{width:"100%"}},(0,l.__)("Edit Animation Rules","fluid-gradient-block"))),(0,o.createElement)(n.PanelBody,{title:(0,l.__)("Initial Shapes","fluid-gradient-block"),initialOpen:!1},(0,o.createElement)("p",{style:{fontSize:"12px",color:"#757575",marginBottom:"12px"}},(0,l.__)("Configure shapes that fire on page load to create dynamic starting patterns.","fluid-gradient-block")),(0,o.createElement)("p",{style:{fontSize:"13px",marginBottom:"12px"}},(0,o.createElement)("strong",null,(I||[]).length)," ",(0,l.__)("shape(s) configured","fluid-gradient-block")),(0,o.createElement)(n.Button,{variant:"secondary",onClick:()=>G(!0),style:{width:"100%"}},(0,l.__)("Edit Initial Shapes","fluid-gradient-block"))))),(0,o.createElement)(g,{isOpen:P,onClose:()=>G(!1),shapes:I||[],onSave:e=>i({initialShapes:e})}),(0,o.createElement)(h,{isOpen:O,onClose:()=>N(!1),scrollAnimations:Y,fluidSettings:z,onSave:e=>i({fluidSettings:{...z,scrollAnimations:e}})}),(0,o.createElement)("div",{...X},T?(0,o.createElement)("div",{className:"fgb-collapsed-placeholder"},(0,o.createElement)("span",null,(0,l.__)("Fluid Gradient Group (hidden)","fluid-gradient-block")),(0,o.createElement)("button",{type:"button",className:"fgb-show-button",onClick:()=>A(!1)},(0,l.__)("Show","fluid-gradient-block"))):(0,o.createElement)(t.Fragment,null,D&&(0,o.createElement)("div",{className:"fgb-fluid-preview"},(0,o.createElement)("span",null,(0,l.__)("Fluid Background Active","fluid-gradient-block"))),(0,o.createElement)(a.InnerBlocks,{templateLock:!1,renderAppender:a.InnerBlocks.DefaultBlockAppender}))))},save:function({attributes:e}){const{enableFluid:l,fluidSettings:n,tagName:o,initialShapes:r}=e,i=o||"div",d=a.useBlockProps.save({className:"fgb-fluid-group "+(l?"has-fluid-background":""),"data-fluid-enabled":l?"true":"false","data-fluid-settings":l?JSON.stringify(n):void 0,"data-initial-shapes":l&&r?.length?JSON.stringify(r):void 0});return(0,t.createElement)(i,{...d},l&&(0,t.createElement)("canvas",{className:"fgb-fluid-canvas"}),(0,t.createElement)("div",{className:"fgb-fluid-content"},(0,t.createElement)(a.InnerBlocks.Content,null)))}})})();