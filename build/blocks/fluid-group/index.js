(()=>{"use strict";const e=window.wp.blocks,l=window.React,t=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,a=window.wp.element,r=(0,a.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:24,height:24},(0,a.createElement)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})),i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"fgb/fluid-group","version":"1.0.0","title":"Fluid Gradient Group","category":"design","icon":"slides","description":"A container block with optional WebGL fluid dynamics background.","keywords":["fluid","gradient","animation","group","container","webgl"],"textdomain":"fluid-gradient-block","attributes":{"enableFluid":{"type":"boolean","default":false},"fluidSettings":{"type":"object","default":{"preset":"default","simResolution":128,"dyeResolution":1024,"densityDissipation":0.97,"velocityDissipation":0.98,"pressure":0.8,"curl":30,"splatRadius":0.25,"splatForce":6000,"projectionDistance":1,"fadeSpeed":1,"calmDown":false,"calmDownDelay":2000,"calmDownStrength":0.9,"bloom":true,"bloomIntensity":0.8,"bloomThreshold":0.6,"colorSaturation":1,"colorBrightness":0.15,"saturationBoost":1,"fixedColor":"#ff00ff","colorChangeDistance":0,"colorMode":"rainbow","hueMin":0,"hueMax":360,"gradientSpeed":0.5,"paletteColors":["#ff0000","#00ff00","#0000ff"],"rainbowMode":true,"preventOverblending":false,"maxColorIntensity":1,"darkMode":false,"cursorMode":"default","dotCursor":{"size":10,"color":"#ffffff"},"crosshairCursor":{"thickness":1,"color":"#ffffff"},"siblingHoverMode":false,"blendMode":"normal","negativeBloom":false,"elementInteraction":{"enabled":false,"selectors":"","trackScroll":false,"mode":"hardCorner","softEdgeRadius":20,"forceFieldStrength":50,"forceFieldRadius":80,"attractFieldStrength":50,"attractFieldRadius":80,"turbulenceIntensity":30,"turbulenceScale":50,"affectNewSplats":true,"affectExistingFluid":false,"edgeGlow":false,"edgeGlowIntensity":0.5,"edgeGlowDistance":15,"edgeGlowMatchFluid":true,"edgeGlowColor":"#ffffff"}}},"tagName":{"type":"string","default":"div"},"minHeight":{"type":"string"},"backgroundColor":{"type":"string"}},"supports":{"anchor":true,"align":["wide","full"],"html":false,"background":{"backgroundImage":true,"backgroundSize":true},"color":{"gradients":true,"heading":true,"button":true,"link":true,"text":true,"background":true},"spacing":{"margin":true,"padding":true,"blockGap":true},"dimensions":{"minHeight":true},"position":{"sticky":true},"typography":{"fontSize":true,"lineHeight":true},"layout":{"allowSizingOnChildren":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css","viewScript":"file:./view.js"}');(0,e.registerBlockType)(i.name,{...i,edit:function({attributes:e,setAttributes:i}){var d,c,u,s,g,m,f,b,h,p,_,v,E,C,k,R;const{enableFluid:S,fluidSettings:w}=e,[x,T]=(0,a.useState)(!1),F=(0,a.useRef)(null),y=(0,a.useRef)(null),D=(e,l)=>{i({fluidSettings:{...w,[e]:l}})},M=(e,l)=>{i({fluidSettings:{...w,elementInteraction:{...w.elementInteraction,[e]:l}}})},A=w.elementInteraction||{};(0,a.useEffect)(()=>{let e,l=null;return x&&S&&F.current&&(e=setTimeout(()=>{F.current&&(l=function(e,l,t){var n,o,a,r,i,d,c,u,s,g,m,f,b,h,p,_,v;const E={SIM_RESOLUTION:Math.min(null!==(n=l.simResolution)&&void 0!==n?n:128,64),DYE_RESOLUTION:Math.min(null!==(o=l.dyeResolution)&&void 0!==o?o:1024,512),DENSITY_DISSIPATION:null!==(a=l.densityDissipation)&&void 0!==a?a:.97,VELOCITY_DISSIPATION:null!==(r=l.velocityDissipation)&&void 0!==r?r:.98,PRESSURE:null!==(i=l.pressure)&&void 0!==i?i:.8,PRESSURE_ITERATIONS:10,CURL:null!==(d=l.curl)&&void 0!==d?d:30,SPLAT_RADIUS:null!==(c=l.splatRadius)&&void 0!==c?c:.25,SPLAT_FORCE:null!==(u=l.splatForce)&&void 0!==u?u:6e3,PROJECTION_DISTANCE:null!==(s=l.projectionDistance)&&void 0!==s?s:1,FADE_SPEED:null!==(g=l.fadeSpeed)&&void 0!==g?g:1,BLOOM:!1,BLOOM_INTENSITY:0,BLOOM_THRESHOLD:.6},C={saturation:null!==(m=l.colorSaturation)&&void 0!==m?m:1,brightness:null!==(f=l.colorBrightness)&&void 0!==f?f:.15,saturationBoost:null!==(b=l.saturationBoost)&&void 0!==b?b:1,fixedColor:null!==(h=l.fixedColor)&&void 0!==h?h:"#ff00ff",rainbowMode:!1!==l.rainbowMode,preventOverblending:null!==(p=l.preventOverblending)&&void 0!==p&&p,maxColorIntensity:null!==(_=l.maxColorIntensity)&&void 0!==_?_:1,darkMode:null!==(v=l.darkMode)&&void 0!==v&&v},k={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};let R=e.getContext("webgl2",k);const S=!!R;if(S||(R=e.getContext("webgl",k)||e.getContext("experimental-webgl",k)),!R)return void console.error("WebGL not supported");const w=e.parentElement,x=e.getBoundingClientRect();let T,F,y,D,M=x.width||w?.offsetWidth||w?.clientWidth||400,A=x.height||w?.offsetHeight||w?.clientHeight||200;if(M=Math.max(M,200),A=Math.max(A,100),e.width=M,e.height=A,console.log("Editor preview canvas:",M,"x",A),S)R.getExtension("EXT_color_buffer_float"),T=R.HALF_FLOAT,F={internalFormat:R.RGBA16F,format:R.RGBA},y={internalFormat:R.RG16F,format:R.RG},D={internalFormat:R.R16F,format:R.RED};else{const e=R.getExtension("OES_texture_half_float");T=e?e.HALF_FLOAT_OES:R.UNSIGNED_BYTE,F=y=D={internalFormat:R.RGBA,format:R.RGBA}}R.clearColor(0,0,0,1);const B="\n        precision highp float;\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        void main() {\n            vUv = aPosition * 0.5 + 0.5;\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n    ";function I(e,l){const t=R.createShader(e);return R.shaderSource(t,l),R.compileShader(t),R.getShaderParameter(t,R.COMPILE_STATUS)?t:(console.error("Shader error:",R.getShaderInfoLog(t)),null)}function O(e,l){const t=I(R.VERTEX_SHADER,e),n=I(R.FRAGMENT_SHADER,l);if(!t||!n)return null;const o=R.createProgram();R.attachShader(o,t),R.attachShader(o,n),R.linkProgram(o);const a={},r=R.getProgramParameter(o,R.ACTIVE_UNIFORMS);for(let e=0;e<r;e++){const l=R.getActiveUniform(o,e).name;a[l]=R.getUniformLocation(o,l)}return{program:o,uniforms:a}}const N=O(B,"\n        precision highp float;\n        varying vec2 vUv;\n        uniform sampler2D uTexture;\n        void main() {\n            vec3 c = texture2D(uTexture, vUv).rgb;\n            float a = max(c.r, max(c.g, c.b));\n            gl_FragColor = vec4(c, a);\n        }\n    "),P=O(B,"\n        precision highp float;\n        varying vec2 vUv;\n        uniform sampler2D uTarget;\n        uniform float aspectRatio;\n        uniform vec3 color;\n        uniform vec2 point;\n        uniform float radius;\n        void main() {\n            vec2 p = vUv - point.xy;\n            p.x *= aspectRatio;\n            vec3 splat = exp(-dot(p, p) / radius) * color;\n            vec3 base = texture2D(uTarget, vUv).xyz;\n            gl_FragColor = vec4(base + splat, 1.0);\n        }\n    "),U=O(B,"\n        precision mediump float;\n        varying vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float value;\n        void main() {\n            gl_FragColor = value * texture2D(uTexture, vUv);\n        }\n    ");if(!N||!P||!U)return;const L=R.createBuffer();R.bindBuffer(R.ARRAY_BUFFER,L),R.bufferData(R.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),R.STATIC_DRAW);const G=R.createBuffer();function H(e,l){const t=R.createTexture();R.bindTexture(R.TEXTURE_2D,t),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texImage2D(R.TEXTURE_2D,0,F.internalFormat,e,l,0,F.format,T,null);const n=R.createFramebuffer();return R.bindFramebuffer(R.FRAMEBUFFER,n),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,t,0),R.clear(R.COLOR_BUFFER_BIT),{texture:t,fbo:n,width:e,height:l,attach:e=>(R.activeTexture(R.TEXTURE0+e),R.bindTexture(R.TEXTURE_2D,t),e)}}R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,G),R.bufferData(R.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),R.STATIC_DRAW);const X=Math.min(E.DYE_RESOLUTION,e.width,e.height),Y=function(e,l){let t=H(e,l),n=H(e,l);return{get read(){return t},get write(){return n},swap(){const e=t;t=n,n=e}}}(X,X);function z(e){e?(R.viewport(0,0,e.width,e.height),R.bindFramebuffer(R.FRAMEBUFFER,e.fbo)):(R.viewport(0,0,R.drawingBufferWidth,R.drawingBufferHeight),R.bindFramebuffer(R.FRAMEBUFFER,null)),R.bindBuffer(R.ARRAY_BUFFER,L),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,G),R.enableVertexAttribArray(0),R.vertexAttribPointer(0,2,R.FLOAT,!1,0,0),R.drawElements(R.TRIANGLES,6,R.UNSIGNED_SHORT,0)}function j(){let e;if(C.rainbowMode){const l=Math.min(C.saturation*C.saturationBoost,1);e=function(e,l,t){let n,o,a;const r=Math.floor(6*e),i=6*e-r,d=t*(1-l),c=t*(1-i*l),u=t*(1-(1-i)*l);switch(r%6){case 0:n=t,o=u,a=d;break;case 1:n=c,o=t,a=d;break;case 2:n=d,o=t,a=u;break;case 3:n=d,o=c,a=t;break;case 4:n=u,o=d,a=t;break;case 5:n=t,o=d,a=c}return{r:n,g:o,b:a}}(Math.random(),l,1)}else e=function(e){const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return l?{r:parseInt(l[1],16)/255,g:parseInt(l[2],16)/255,b:parseInt(l[3],16)/255}:{r:1,g:0,b:1}}(C.fixedColor);if(e.r*=C.brightness,e.g*=C.brightness,e.b*=C.brightness,C.preventOverblending){const l=C.maxColorIntensity;e.r=Math.min(e.r,l),e.g=Math.min(e.g,l),e.b=Math.min(e.b,l)}return C.darkMode&&(e.r=-e.r,e.g=-e.g,e.b=-e.b),e}let W={x:0,y:0,px:0,py:0,down:!1};e.addEventListener("mousemove",l=>{const t=e.getBoundingClientRect();W.px=W.x,W.py=W.y,W.x=(l.clientX-t.left)/t.width,W.y=1-(l.clientY-t.top)/t.height;const n=(W.x-W.px)*E.SPLAT_FORCE*E.PROJECTION_DISTANCE,o=(W.y-W.py)*E.SPLAT_FORCE*E.PROJECTION_DISTANCE;var a,r,i;(Math.abs(n)>.001||Math.abs(o)>.001)&&(a=W.x,r=W.y,i=j(),R.useProgram(P.program),R.uniform1i(P.uniforms.uTarget,Y.read.attach(0)),R.uniform1f(P.uniforms.aspectRatio,e.width/e.height),R.uniform2f(P.uniforms.point,a,r),R.uniform3f(P.uniforms.color,i.r,i.g,i.b),R.uniform1f(P.uniforms.radius,E.SPLAT_RADIUS/100),z(Y.write),Y.swap())}),function e(){R.useProgram(U.program),R.uniform1i(U.uniforms.uTexture,Y.read.attach(0)),R.uniform1f(U.uniforms.value,E.DENSITY_DISSIPATION/E.FADE_SPEED),z(Y.write),Y.swap(),R.useProgram(N.program),R.uniform1i(N.uniforms.uTexture,Y.read.attach(0)),z(null),t.current=requestAnimationFrame(e)}()}(F.current,w,y))},100)),()=>{e&&clearTimeout(e),y.current&&(cancelAnimationFrame(y.current),y.current=null),l&&l()}},[x,S]);const B=(0,n.useBlockProps)({className:"fgb-fluid-group "+(S?"has-fluid-background":"")});return(0,a.createElement)(l.Fragment,null,S&&(0,a.createElement)(n.BlockControls,null,(0,a.createElement)(o.ToolbarGroup,null,(0,a.createElement)(o.ToolbarButton,{icon:r,label:x?(0,t.__)("Stop Preview","fluid-gradient-block"):(0,t.__)("Live Preview","fluid-gradient-block"),onClick:()=>T(!x),isPressed:x}))),(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Fluid Background","fluid-gradient-block"),initialOpen:!0},(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Enable Fluid Dynamics","fluid-gradient-block"),checked:S,onChange:e=>i({enableFluid:e}),help:S?(0,t.__)("WebGL fluid animation is enabled","fluid-gradient-block"):(0,t.__)("Enable interactive fluid background","fluid-gradient-block")})),S&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Simulation","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Simulation Resolution","fluid-gradient-block"),value:w.simResolution,onChange:e=>D("simResolution",e),min:32,max:256,step:16}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Dye Resolution","fluid-gradient-block"),value:w.dyeResolution,onChange:e=>D("dyeResolution",e),min:256,max:2048,step:128})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Behavior","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Density Dissipation","fluid-gradient-block"),value:w.densityDissipation,onChange:e=>D("densityDissipation",e),min:0,max:1,step:.01}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Velocity Dissipation","fluid-gradient-block"),value:w.velocityDissipation,onChange:e=>D("velocityDissipation",e),min:0,max:1,step:.01}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Pressure","fluid-gradient-block"),value:w.pressure,onChange:e=>D("pressure",e),min:0,max:1,step:.05}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Curl (Vorticity)","fluid-gradient-block"),value:w.curl,onChange:e=>D("curl",e),min:0,max:100}),(0,a.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Calm Down Mode","fluid-gradient-block"),checked:w.calmDown,onChange:e=>D("calmDown",e),help:(0,t.__)("Reduce jiggle after period of no input","fluid-gradient-block")}),w.calmDown&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Calm Down Delay (ms)","fluid-gradient-block"),value:null!==(d=w.calmDownDelay)&&void 0!==d?d:2e3,onChange:e=>D("calmDownDelay",e),min:500,max:1e4,step:500,help:(0,t.__)("Time after last input before calming starts","fluid-gradient-block")}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Damping Strength","fluid-gradient-block"),value:null!==(c=w.calmDownStrength)&&void 0!==c?c:.9,onChange:e=>D("calmDownStrength",e),min:.5,max:.99,step:.01,help:(0,t.__)("Lower = faster calming (more damping)","fluid-gradient-block")}))),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Mouse Input","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Splat Radius","fluid-gradient-block"),value:w.splatRadius,onChange:e=>D("splatRadius",e),min:.05,max:1,step:.05}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Splat Force","fluid-gradient-block"),value:w.splatForce,onChange:e=>D("splatForce",e),min:0,max:5e4,step:500}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Projection Distance","fluid-gradient-block"),value:w.projectionDistance||1,onChange:e=>D("projectionDistance",e),min:.5,max:5,step:.25,help:(0,t.__)("How far colors shoot in mouse direction","fluid-gradient-block")}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Fade Speed","fluid-gradient-block"),value:w.fadeSpeed||1,onChange:e=>D("fadeSpeed",e),min:.1,max:3,step:.1,help:(0,t.__)("How quickly colors fade out (higher = faster)","fluid-gradient-block")})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Bloom Effect","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Enable Bloom","fluid-gradient-block"),checked:w.bloom,onChange:e=>D("bloom",e)}),w.bloom&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Bloom Intensity","fluid-gradient-block"),value:w.bloomIntensity,onChange:e=>D("bloomIntensity",e),min:0,max:2,step:.1}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Bloom Threshold","fluid-gradient-block"),value:w.bloomThreshold,onChange:e=>D("bloomThreshold",e),min:0,max:1,step:.05}))),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Colors","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Color Saturation","fluid-gradient-block"),value:w.colorSaturation,onChange:e=>D("colorSaturation",e),min:0,max:5,step:.1}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Color Brightness","fluid-gradient-block"),value:w.colorBrightness,onChange:e=>D("colorBrightness",e),min:0,max:1,step:.01}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Saturation Boost","fluid-gradient-block"),value:w.saturationBoost||1,onChange:e=>D("saturationBoost",e),min:1,max:3,step:.1,help:(0,t.__)("Boost saturation for more vivid colors","fluid-gradient-block")}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Color Mode","fluid-gradient-block"),value:w.colorMode||"rainbow",options:[{label:"Full Rainbow (Random)",value:"rainbow"},{label:"Limited Hue Range",value:"huerange"},{label:"Smooth Gradient",value:"gradient"},{label:"Single Color",value:"single"}],onChange:e=>{i({fluidSettings:{...w,colorMode:e,rainbowMode:"single"!==e}})}}),("rainbow"===w.colorMode||"huerange"===w.colorMode||!w.colorMode)&&(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Color Change Distance","fluid-gradient-block"),value:w.colorChangeDistance||0,onChange:e=>D("colorChangeDistance",e),min:0,max:500,step:10,help:(0,t.__)("Pixels to move before new color (0 = every frame)","fluid-gradient-block")}),"huerange"===w.colorMode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Hue Min (°)","fluid-gradient-block"),value:null!==(u=w.hueMin)&&void 0!==u?u:0,onChange:e=>D("hueMin",e),min:0,max:360,step:5,help:(0,t.__)("0=Red, 60=Yellow, 120=Green, 180=Cyan, 240=Blue, 300=Magenta","fluid-gradient-block")}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Hue Max (°)","fluid-gradient-block"),value:null!==(s=w.hueMax)&&void 0!==s?s:360,onChange:e=>D("hueMax",e),min:0,max:360,step:5})),"gradient"===w.colorMode&&(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Gradient Speed","fluid-gradient-block"),value:null!==(g=w.gradientSpeed)&&void 0!==g?g:.5,onChange:e=>D("gradientSpeed",e),min:.01,max:10,step:.01,help:(0,t.__)("How fast colors shift through the spectrum","fluid-gradient-block")}),"single"===w.colorMode&&(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("label",{className:"components-base-control__label"},(0,t.__)("Fixed Color","fluid-gradient-block")),(0,a.createElement)("input",{type:"color",value:w.fixedColor||"#ff00ff",onChange:e=>D("fixedColor",e.target.value),style:{width:"100%",height:"36px",cursor:"pointer"}})),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Prevent Overblending","fluid-gradient-block"),checked:w.preventOverblending,onChange:e=>D("preventOverblending",e),help:(0,t.__)("Clamps max color intensity to prevent white-out","fluid-gradient-block")}),w.preventOverblending&&(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Max Color Intensity","fluid-gradient-block"),value:w.maxColorIntensity||1,onChange:e=>D("maxColorIntensity",e),min:.5,max:2,step:.1}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Dark Fluid Mode","fluid-gradient-block"),checked:w.darkMode,onChange:e=>D("darkMode",e),help:(0,t.__)("Creates dark fluid effect (use with light background)","fluid-gradient-block")}),(0,a.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Cursor Mode","fluid-gradient-block"),value:w.cursorMode||"default",options:[{label:"Default",value:"default"},{label:"Hidden",value:"hidden"},{label:"Dot",value:"dot"},{label:"Crosshair",value:"crosshair"}],onChange:e=>D("cursorMode",e),help:(0,t.__)("Choose how the cursor appears over the block","fluid-gradient-block")}),"dot"===w.cursorMode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Dot Size","fluid-gradient-block"),value:null!==(m=w.dotCursor?.size)&&void 0!==m?m:10,onChange:e=>i({fluidSettings:{...w,dotCursor:{...w.dotCursor,size:e}}}),min:4,max:50,step:2}),(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("label",{className:"components-base-control__label"},(0,t.__)("Dot Color","fluid-gradient-block")),(0,a.createElement)("input",{type:"color",value:w.dotCursor?.color||"#ffffff",onChange:e=>i({fluidSettings:{...w,dotCursor:{...w.dotCursor,color:e.target.value}}}),style:{width:"100%",height:"36px",cursor:"pointer"}}))),"crosshair"===w.cursorMode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Line Thickness","fluid-gradient-block"),value:null!==(f=w.crosshairCursor?.thickness)&&void 0!==f?f:1,onChange:e=>i({fluidSettings:{...w,crosshairCursor:{...w.crosshairCursor,thickness:e}}}),min:1,max:10,step:1}),(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("label",{className:"components-base-control__label"},(0,t.__)("Line Color","fluid-gradient-block")),(0,a.createElement)("input",{type:"color",value:w.crosshairCursor?.color||"#ffffff",onChange:e=>i({fluidSettings:{...w,crosshairCursor:{...w.crosshairCursor,color:e.target.value}}}),style:{width:"100%",height:"36px",cursor:"pointer"}}))),(0,a.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Sibling Hover Mode","fluid-gradient-block"),checked:w.siblingHoverMode,onChange:e=>D("siblingHoverMode",e),help:(0,t.__)("Track mouse through overlapping sibling elements. Use when content is placed outside the block but visually overlays it (e.g., sticky layouts).","fluid-gradient-block")})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Blend Mode","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Canvas Blend Mode","fluid-gradient-block"),value:w.blendMode||"normal",options:[{label:"Normal",value:"normal"},{label:"Multiply",value:"multiply"},{label:"Screen",value:"screen"},{label:"Overlay",value:"overlay"},{label:"Darken",value:"darken"},{label:"Lighten",value:"lighten"},{label:"Color Dodge",value:"color-dodge"},{label:"Color Burn",value:"color-burn"},{label:"Hard Light",value:"hard-light"},{label:"Soft Light",value:"soft-light"},{label:"Difference",value:"difference"},{label:"Exclusion",value:"exclusion"},{label:"Hue",value:"hue"},{label:"Saturation",value:"saturation"},{label:"Color",value:"color"},{label:"Luminosity",value:"luminosity"}],onChange:e=>D("blendMode",e)}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Negative Bloom","fluid-gradient-block"),checked:w.negativeBloom,onChange:e=>D("negativeBloom",e),help:(0,t.__)("Inverts colors for a dark glow effect","fluid-gradient-block")})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Element Interaction","fluid-gradient-block"),initialOpen:!1},(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Enable Element Interaction","fluid-gradient-block"),checked:A.enabled,onChange:e=>M("enabled",e),help:(0,t.__)("Allow DOM elements to interact with fluid","fluid-gradient-block")}),A.enabled&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.TextControl,{label:(0,t.__)("CSS Selectors","fluid-gradient-block"),value:A.selectors||"",onChange:e=>M("selectors",e),placeholder:".my-class, #my-id",help:(0,t.__)("Comma-separated CSS selectors for interacting elements","fluid-gradient-block")}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Track on Scroll","fluid-gradient-block"),checked:A.trackScroll,onChange:e=>M("trackScroll",e),help:(0,t.__)("Update element positions on page scroll","fluid-gradient-block")}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Interaction Mode","fluid-gradient-block"),value:A.mode||"hardCorner",options:[{label:"Hard Corner (Blocks fluid)",value:"hardCorner"},{label:"Soft Edge (Gradual fade)",value:"softEdge"},{label:"Force Field (Repels fluid)",value:"forceField"},{label:"Attract Field (Pulls fluid)",value:"attractField"},{label:"Turbulence (Creates swirls)",value:"turbulence"}],onChange:e=>M("mode",e)}),"softEdge"===A.mode&&(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Soft Edge Radius","fluid-gradient-block"),value:null!==(b=A.softEdgeRadius)&&void 0!==b?b:20,onChange:e=>M("softEdgeRadius",e),min:5,max:100,step:5,help:(0,t.__)("Fade distance in pixels","fluid-gradient-block")}),"forceField"===A.mode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Force Strength","fluid-gradient-block"),value:null!==(h=A.forceFieldStrength)&&void 0!==h?h:50,onChange:e=>M("forceFieldStrength",e),min:10,max:200,step:10}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Force Radius","fluid-gradient-block"),value:null!==(p=A.forceFieldRadius)&&void 0!==p?p:80,onChange:e=>M("forceFieldRadius",e),min:20,max:300,step:10,help:(0,t.__)("Distance of force effect in pixels","fluid-gradient-block")})),"attractField"===A.mode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Attract Strength","fluid-gradient-block"),value:null!==(_=A.attractFieldStrength)&&void 0!==_?_:50,onChange:e=>M("attractFieldStrength",e),min:10,max:200,step:10}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Attract Radius","fluid-gradient-block"),value:null!==(v=A.attractFieldRadius)&&void 0!==v?v:80,onChange:e=>M("attractFieldRadius",e),min:20,max:300,step:10})),"turbulence"===A.mode&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Turbulence Intensity","fluid-gradient-block"),value:null!==(E=A.turbulenceIntensity)&&void 0!==E?E:30,onChange:e=>M("turbulenceIntensity",e),min:5,max:100,step:5}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Turbulence Scale","fluid-gradient-block"),value:null!==(C=A.turbulenceScale)&&void 0!==C?C:50,onChange:e=>M("turbulenceScale",e),min:10,max:200,step:10})),(0,a.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Affect New Splats","fluid-gradient-block"),checked:!1!==A.affectNewSplats,onChange:e=>M("affectNewSplats",e),help:(0,t.__)("Apply effects to new fluid being created","fluid-gradient-block")}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Affect Existing Fluid","fluid-gradient-block"),checked:A.affectExistingFluid,onChange:e=>M("affectExistingFluid",e),help:(0,t.__)("Apply effects to fluid already on canvas","fluid-gradient-block")}),(0,a.createElement)("hr",{style:{margin:"20px 0",borderColor:"#ddd"}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Edge Glow","fluid-gradient-block"),checked:A.edgeGlow,onChange:e=>M("edgeGlow",e),help:(0,t.__)("Add a color glow around element edges","fluid-gradient-block")}),A.edgeGlow&&(0,a.createElement)(l.Fragment,null,(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Glow Intensity","fluid-gradient-block"),value:null!==(k=A.edgeGlowIntensity)&&void 0!==k?k:.5,onChange:e=>M("edgeGlowIntensity",e),min:.1,max:2,step:.1}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Glow Distance","fluid-gradient-block"),value:null!==(R=A.edgeGlowDistance)&&void 0!==R?R:15,onChange:e=>M("edgeGlowDistance",e),min:5,max:50,step:5}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Match Fluid Colors","fluid-gradient-block"),checked:A.edgeGlowMatchFluid,onChange:e=>M("edgeGlowMatchFluid",e)}),!A.edgeGlowMatchFluid&&(0,a.createElement)("div",{className:"components-base-control"},(0,a.createElement)("label",{className:"components-base-control__label"},(0,t.__)("Glow Color","fluid-gradient-block")),(0,a.createElement)("input",{type:"color",value:A.edgeGlowColor||"#ffffff",onChange:e=>M("edgeGlowColor",e.target.value),style:{width:"100%",height:"36px",cursor:"pointer"}}))))))),(0,a.createElement)("div",{...B},S&&x&&(0,a.createElement)("canvas",{ref:F,className:"fgb-fluid-canvas fgb-editor-canvas",style:{mixBlendMode:w.blendMode||"normal",filter:w.negativeBloom?"invert(1)":"none"}}),S&&!x&&(0,a.createElement)("div",{className:"fgb-fluid-preview"},(0,a.createElement)("span",null,(0,t.__)("Fluid Background Active (Click eye icon for preview)","fluid-gradient-block"))),(0,a.createElement)(n.InnerBlocks,{templateLock:!1,renderAppender:n.InnerBlocks.DefaultBlockAppender})))},save:function({attributes:e}){const{enableFluid:t,fluidSettings:o,tagName:a}=e,r=a||"div",i=n.useBlockProps.save({className:"fgb-fluid-group "+(t?"has-fluid-background":""),"data-fluid-enabled":t?"true":"false","data-fluid-settings":t?JSON.stringify(o):void 0});return(0,l.createElement)(r,{...i},t&&(0,l.createElement)("canvas",{className:"fgb-fluid-canvas"}),(0,l.createElement)("div",{className:"fgb-fluid-content"},(0,l.createElement)(n.InnerBlocks.Content,null)))}})})();